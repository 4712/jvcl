<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <link rel="STYLESHEET" href="default.css" type="text/css">
  <title>Installation Notes for JVCL</title>
</head>
<body>
<h1>Installation Notes for JVCL</h1>
<h3> </h3>
<hr>
<h2>Current version</h2>
<p>The current version of JVCL is 3.00 alpha minus, released on
YYYY-MM-DD</p>
<p>&nbsp;</p>
<h2>Supported compiler versions</h2>
<p>&nbsp;</p>
<p>The following compilers are supported by the JVCL:</p>
<ul>
  <li>Delphi 5</li>
  <li>Delphi 6</li>
  <li>Delphi 7</li>
  <li>C++ Builder 5</li>
  <li>C++ Builder 6<br>
  </li>
</ul>
<p>&nbsp;</p>
<h2>Uninstalling previous versions of JVCL</h2>
<p>If you have a previous version of the JVCL installed, you must
remove it completely along with the JCL before
installing this version. To remove a previous installation, proceed as
follows:</p>
<ol>
  <li>Start the IDE, open the packages page by selecting <b>Component
- Install Packages</b></li>
  <li>Select each of the JCL / JVCL packages in the list and click the <b>Remove</b>
button</li>
  <li>Open <b>Tools - Environment Options - Library</b> and remove all
library paths pointing to JVCL and JCL folders</li>
  <li>Repeat step 1 to 3 for every version of Delphi and C++ Builder
you have installed</li>
  <li>Close the IDE<br>
  </li>
  <li>Browse to the folder where your bpl and dcp files are located
(default is $(DELPHI)\Projects\Bpl for Delphi, $(BCB)\Projects\Bpl for
C++ Builder). Delete all of the files related to JVCL and JCL</li>
  <li>Delete or rename the top folder where JCL and JVCL is installed</li>
  <li>Start regedit (click <b>Start - Run</b>, type "regedit.exe" and
hit <b> Enter</b>). Open the key <font size="2" face="Courier New">HKEY_CURRENT_USER\Software\Borland\&lt;compiler&gt;\&lt;version&gt;\Palette</font>
and delete all name/value items in the list related to JVCL.
(&lt;compiler&gt; is either "Delphi" or "C++Builder", &lt;version&gt;
is the IDE version you have installed)</li>
</ol>
<br>
<h2>Getting required packages</h2>
<p align="left">JVCL requires that you also install the latest version
of JCL (JEDI Code Library). Currently, this is the JCL Preview, but
newer versions might have been released since this document was
published. Instructions on where to download JCL can be found on this
page: <a href="http://sourceforge.net/projects/jcl">
http://sourceforge.net/projects/jcl</a>.</p>
<p align="left">As of today (30th of September 2003), the JCL package
must be updated
with numerous bug fixes. For your convenience, these bug fixes are
included in the distribution file but please note that as soon as the
JCL group does a new release, we recommend you use it instead as it
will
include our fixes plus many others.<br>
<br>
</p>
<hr style="width: 100%; height: 2px;">
<h2>Manual install for Delphi<br>
</h2>
<p>Start by unpacking the JVCL and JCL zip files into a folder of your
own choice. Make sure your zip extractor is set to maintain folder
structure or all files will be put into the same folder (<b>not</b>
what
you want!). We recommend but do not require that the JCL and JVCL
folders should be created as siblings, i.e the
folder structure looks like this:</p>
<p><font face="Courier New" size="2">JEDI<br>
&nbsp; JCL<br>
&nbsp;&nbsp;&nbsp; &lt;JCL subfolders&gt;<br>
&nbsp; JVCL<br>
&nbsp;&nbsp;&nbsp; &lt;JVCL subfolders&gt;<br>
</font></p>
<p dir="ltr">Before you can install the JVCL you must first compile the
JCL packages. How to do this is documented in the JCL download. If the
JCL works as expected, open the JVCL package group file (bpg) for your
version of
Delphi that is located in the jvcl\packages folder. Select <b>Project
-
Build All Projects</b> from the Delphi menu. Go get a cup of coffee
(this
takes a while). After Delphi has compiled all the packages, open the <b>Project
Manager</b> (Ctrl+Alt+F11) and right-click each of the packages ending
with D?D (where ? is the version number, "5" for Delphi 5, "6" for
Delphi 6 etc) and select "<b>Install</b>" from the pop-up menu.
Although
you can skip installing some of the packages, we still recommend that
you install all of them the first time. You can later remove some of
them on a project by project basis or permanently if you never use the
components in the package and the package isn't required by another
installed package.</p>
<p>&nbsp;</p>
<p>If you have several versions of Delphi installed, you will have to
go through these steps for each version, the only difference being the
bpg file you load into the IDE.</p>
<p>&nbsp; <br>
</p>
<div class="InfoField"> When closing a package, Delphi will prompt you
to save the changes to the package. You can answer "No" to this
question
since saving only updates the dof file and that is not necessary. <br>
</div>
<br>
<h2>Adding JVCL paths to Delphi</h2>
<p>To make your applications find the JVCL code when you compile, you
need to add the paths to JVCL to Delphi's environment paths. You have
two options: either add the paths to the JVCL source files or add the
paths to the precompiled DCU files. Both have their drawbacks and
benefits.&nbsp;</p>
<p>&nbsp;</p>
<p>Adding the source paths means you can easily make changes to the
source and see it at run-time but be aware that if you build with
run-time packages, you need to recompile the packages to see the
changes
in the application. To add the source folder locations to Delphi,
select <b>Tools-Environment
Options-Library</b> and add the paths to JVCL\run and
JVCL\common to the Library path.</p>
<p>&nbsp;</p>
<p>Adding the pre-compiled DCU paths means that Delphi won't recompile
the DCU's unless you recompile the packages, so compiling your
application should be faster. To add the DCU folder location, select <b>Tools-Environment
Options-Library</b> and add JVCL\libX (where X is your version
of Delphi, i.e for Delphi 6, it's "6") and JVCL\common (for the INC
files) to the Library path. If you still want to be able to open the
JVCL source files in the IDE, add JVCL\run (and maybe even JVCL\design)
to the Browsing Path list.</p>
<p>&nbsp; <br>
</p>
<h2><big><font size="2"><big>Reinstalling </big></font></big> and<font
 size="2"><big> updating for Delphi</big><br>
</font></h2>
<p>To reinstall or update a package, use the same approach as in the <b>Manual
Install</b> section above with the following additions:</p>
<ul>
  <li>In Delphi 5, uninstall all affected JVCL packages before
rebuilding. Delphi 5 has a problem updating already installed packages,
especially when the package have dependencies. Delphi 6 and Delphi 7
handles this better but you are recommended to remove them anyway
since it minimizes the probability of errors. To uninstall, select <b>Component
- Install Package</b>, select the JVCL packages in the list and click
the <b>Remove</b> button. Click <b>OK</b> to close the dialog (if
you click Cancel the packages will not be removed).</li>
</ul>
<br>
<hr style="width: 100%; height: 2px;">
<h2>Manual install for C++ Builder<br>
</h2>
<p>Start by unpacking the JVCL and JCL zip files into a folder of your
own choice. Make sure your zip extractor is set to maintain folder
structure or all files will be put into the same folder (<b>not</b>
what
you want!). </p>
<p>The JVCL for C++ Builder doesn't assume that the JCL is installed in
the same base folder as JVCL, but we do recommend that the JCL and JVCL
folders are created as siblings, i.e the folder structure should look
like this:</p>
<p><font face="Courier New" size="2">JEDI<br>
&nbsp; JCL<br>
&nbsp;&nbsp;&nbsp; &lt;JCL subfolders&gt;<br>
&nbsp; JVCL<br>
&nbsp;&nbsp;&nbsp; &lt;JVCL subfolders&gt;<br>
</font></p>
<p><br>
Open the JCL package specific to your version of C++&nbsp;Builder. It
is called CJCLxx.bpk where xx is to be replaced by 50 for
C++&nbsp;Builder&nbsp;5 and 60 for C++&nbsp;Builder&nbsp;6. Click the
compile button, wait for about 2 minutes and if the compilation went
well, close the package (File, Close All). Do NOT save it.</p>
<p> Now, open the package group file (bpg) for your version of
C++&nbsp;Builder that is located in the jvcl\packages folder. Select <b>Project
- Build All Projects</b> from the C++&nbsp;Builder menu. Because of an
annoying bug, C++&nbsp;Builder will complain about a lot of .bpi files.
This is because the last packages in the list require the first ones to
be compiled and of course they are not at the beginning. If you know a
way to turn that off, please let us know. An alternative solution is to
right-click in the <span style="font-weight: bold;">Project Manager</span>
and select 'Build' for each package in turn. <br>
A second alternative is to use the provided MakeBCB* batch files. Open
a command line window, change to the directory where the batch files
are and launch the one appropriate for your version of C++ Builder. By
default, it considers that C++ Builder is installed in c:\program
files\cbuilderx, where x is the version number (5 or 6). If it is not
located ther, you must indicate the path to it as the first argument to
the batch file.<br>
</p>
<p>After all packages are compiled, open the <b>Project Manager</b>
(Ctrl+Alt+F11) and right-click each of the packages ending with C?D
(where ? is the version number, "5" for C++&nbsp;Builder&nbsp;5, "6"
for C++&nbsp;Builder&nbsp;6) and select "<b>Install</b>" from the
pop-up menu. You must start from the beginning of the list or some
packages may not be able to get installed. Although you can skip
installing some of the packages, we still recommend that you install
all of them the first time. You can later remove some of them on a
project by project basis or permanently if you never use the components
in the package and the package isn't required by another installed
package. Due to another bug in C++ Builder, the packages will be
recompiled and relinked before being installed. There is nothing to
change to stop this from happening.<br>
</p>
<p><br>
If you have several versions of C++&nbsp;Builder installed, you will
have to go through these steps for each version, the only difference
being the bpg file you load into the IDE.<br>
<br>
</p>
<p>By respecting the structure we indicate, you shouldn't have any
trouble compiling and installing the JVCL. However, some users do not
want to put the JVCL and JCL together and this triggers some problems.
It is possible to have the JCL and the JVCL in seperate locations but
you'll have to follow these steps for everything to work:</p>
<p> Ensure that C++&nbsp;Builder is closed, and add the dcu
subdirectory
of JCL to the PATH environment variable. For instance, if you chose
c:\mypath as the root for the JCL, you must add 'c:\mypath\jcl\dcu' to
the PATH environment variable. Under Windows 2000 and XP, this is done
by opening the 'System properties' applet from the 'Control panel'. You
can either simultaneously press the Windows key and the Pause key or go
through <span style="font-weight: bold;">Start - Parameters -
Control&nbsp;panel - System&nbsp;properties</span>. Once in the applet,
choose the 'Advanced' tab and click on the 'Environment variables'
button at the bottom. Depending on wether or not you want the changes
to
apply to yourself or all users, choose the PATH variable for one of the
two list and click the related 'Modify' button. Add
';c:\mypath\jcl\dcu'
(without the quotes) at the end of the already existing value, and
click
on Ok buttons until the 'System properties' applet is closed. This
modification is required because C++&nbsp;Builder parses this value
when
it searches for pascal units and there are no direct way in the
IDE to specify additional units paths (contrary to Delphi). You may
also use overrides in the environment options, but this has not been
tested. If it works this way, please let us know.<br>
</p>
<p>You should now be able to compile and install the JCL and the JVCL
by following the same directives as in a standard installation<br>
</p>
<p> <br>
</p>
<div class="InfoField"> When closing a package, C++&nbsp;Builder will
prompt you to save the changes to the package. You MUST answer "No" to
this question since saving will most likely render the packages
unusable
for the next time you want to compile the JVCL.<br>
</div>
<br>
<h2>Adding JVCL paths to C++&nbsp;Builder<br>
</h2>
<p>To make your applications find the JVCL header files when you
compile, two options are available to you:<br>
</p>
<p><br>
1) You are willing to add files in the installation directory of C++
Builder. This is the easiest solution but forces you to repeat this
step every time you update the JVCL. Here are the steps:<br>
</p>
<ul>
  <li>Copy all .hpp files to $(BCB)\Include&nbsp; (those files are in
JCL\source subdirectories, in JVCL\run and JVCL\common)<br>
  </li>
  <li>Copy all .obj files to $(BCB)\Lib&nbsp;&nbsp; (those files are in
JCL\Lib\c? and in JVCL\dcu)<br>
  </li>
  <li>Copy all .res files to $(BCB)\Lib&nbsp;&nbsp;&nbsp; (those files
are in JCL\source subdirectories and in JVCL\resources)<br>
  </li>
</ul>
<p><br>
2) You don't want to copy all the hpp and obj files in your
installation directory. Then you need to add the JVCL paths to
C++&nbsp;Builder's
environment paths but this has an big drawback: You won't be able to
share your project with people who installed the JVCL in another
directory. <br>
</p>
<p>All you need to do is start C++&nbsp;Builder and select <span
 style="font-weight: bold;">File-Close All</span>. Then select the <span
 style="font-weight: bold;">Library</span> tab in <b>Tools-Environment
Options</b><span style="font-weight: bold;"> </span>and add those
paths
to the Library paths:<br>
</p>
<ul>
  <li>JCL\lib\c6<br>
  </li>
  <li>JVCL\common<br>
  </li>
  <li>JVCL\dcu</li>
  <li>JVCL\resources</li>
  <li>JVCL\run<br>
  </li>
</ul>
<p></p>
<p>Finally,
select the <span style="font-weight: bold;">Directories/Conditionals</span>
tab in <span style="font-weight: bold;">Project-Options</span> and add
those paths to the Include paths:<br>
</p>
<ul>
  <li>JCL\source\common</li>
  <li>JCL\source\vcl</li>
  <li>JCL\source\visclx</li>
  <li>JCL\source\windows</li>
  <li>JVCL\run</li>
  <li>JVCL\common</li>
</ul>
<p></p>
<p>You will then be able to use the JVCL components. If you do some
modifications to the JVCL source code to add functionality and/or fix
bugs, remember to recompile the package in which the modified files are
included or you won't see the effect of your changes.<br>
<br>
</p>
<p>In both cases, if you want to be able to open the JVCL source files
in the IDE by
using the navigation shorctuts, add thos paths to the Browsing Path
list in the Library tab of Tools-Environment Options:<br>
</p>
<ul>
  <li>JCL\source</li>
  <li>JVCL\run</li>
  <li>JVCL\common</li>
</ul>
<p></p>
<br>
<h2><big><font size="2"><big>Reinstalling </big></font></big><span
 style="font-weight: bold;">
and </span><font size="2"><big>updating for
C++&nbsp;Builder</big><br>
</font></h2>
<p>To reinstall or update a package, use the same approach as in the <b>Manual
Install</b> section above with the following additions:</p>
<ul>
  <li>You should always remove the JVCL packages before rebuilding
them. To uninstall, select <b>Component - Install Package</b>, select
the JVCL packages in the list and click the <b>Remove</b> button.
Click <b>OK</b>
to close the dialog (if you click Cancel the packages will not be
removed).</li>
</ul>
<br>
<br>
</body>
</html>
