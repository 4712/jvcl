<html><head>
    <title>BCB Compatibility Guide</title>
    <LINK href="default.css" type=text/css rel=STYLESHEET ></HEAD>
<body>
<h2>BCB Compatibility Guide</H2>
<p>
<hr>

<p>This document describes the do's and don'ts of component writing when you 
want your Delphi component to work with C++Builder. Many of these issues were 
discovered while creating the JVCL packages for BCB6. If you know of other 
issues that might help us and other Delphi developers, please contact the JVCL 
team.</p>

<p>&nbsp;</p>

<h3>Making your component work with BCB</h3>

  <ul>
    <li><b>Do not use structures like TPoint and TRect as published property 
    types.</b> Instead, if you need this functionality,, define and implement a 
    TPersistent class that provides the same functionality.</li>
    <li><b>Do not use HDC as a published property type.</b> The reason for this 
    error is still not found but in the meantime, use LongWord instead.</li>
    <li><b>Do not declare class methods as dynamic.</b> Use virtual instead.</li>
    <li><b>Do not declare class methods as abstract.</b> Use virtual instead and 
    provide an empty implementation</li>
    <li><b>Do not use WEAKPACKAGEUNIT if you can avoid it</b>. This will in some 
    cases cause a linker error, especially if the unit contains constants, 
    resourcestrings and/or global variables.</li>
</ul>

<p>&nbsp;</p>

<h3>Encountered errors and possible solutions</h3>

<h4>Null not defined</h4>

<p>You must add 'uses Variant' in the <br>
implementation section even if it was already in the interface section. <br>
Doing so would break Delphi compilation, so you must enclose it with <br>
conditional compilation directives, {$IFDEF BCB6}uses Variant;{$ENDIF}<br>
&nbsp;</p>

<h4>Cannot find FiltEdit.dcu</h4>

<p>Open the bpk file with a text editor. Add '-LUdclstd' to the PFLAGS node, and 
add dclstd.bpi to the requires node.</p>

<h4>Cannot find DesignIntf.dcu</h4>

<p>Open the bpk file with a text editor. Add '-LUDesignIde' to the PFLAGS node, 
and add DesignIde.bpi to the requires node.<br>
&nbsp;</p>

<h4>Incompatible types: Set of char and String</h4>

<p>An old remnant of BCB4 and under support because BCB4 didn't support sets. 
BCB5 and newer and as JVCL doesn't support anything below BCB5, all conditional 
compilation directives defining Delphi sets as string must be removed to only 
leave Delphi style sets definitions.<br>
&nbsp;</p>

<h4>[Linker Error] Fatal: Access violation. Link Terminated.</h4>

<p>See &quot;Do not use WEAKPACKAGEUNIT&quot; above.</p>

<h4>Cannot find CJCL60.bpl</h4>

<p>You must add CJCL60.bpi to the requires list of your package. The directory 
to that file MUST be in the PATH environment variable.<br>
&nbsp;</p>

<h4>Incompatible types</h4>

<p>Usually an error that has to do with record/case being used to perform 
automatic casting. This a construct to avoid as it is not supported by BCB.<br>
&nbsp;</p>

<h4>Constructor already defined</h4>

<p>This comes because of a constructor not being called Create in the source pas 
file. As a rule, all constructors MUST be named create and you must fix your 
pascal code to cope with that.<br>
&nbsp;</p>

<h4>E2303 Type name expected (on a __property line)</h4>

<p>This is because of bad casing. Usual example is having PopUpMenu where it 
should be PopupMenu. BCB is case sensitive so you must respect casing in your 
pas files, at least in the interface section.<br>
&nbsp;</p>

<h4>Cannot initialize constant</h4>

<p>(or something similar, usually provokes 3 errors on the same line, the second 
being the interesting one). This is because the parameter name you chose for 
your function is a constant under BCB. The only solution is to change the name 
of the incriminated parameter.<br>
&nbsp;</p>

<h4>Ambiguity between SOMETYPE and SomeDomain::SOMETYPE</h4>

<p>This is because the type SOMETYPE is a global type (in windows.h, generally) 
and is also defined in the SomeDomain file. To lift this ambiguity, you must add 
a line at the beginning of the pas file that does that: &quot;{$HPPEMIT '#define 
SOMETYPE SomeDomain::SOMETYPE'}&quot;<br>
&nbsp;</p>

  </body></HTML>